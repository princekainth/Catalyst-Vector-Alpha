{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Grid,Paper,Typography,Box,Button,CircularProgress,Alert,Snackbar}from'@mui/material';import{Refresh as RefreshIcon}from'@mui/icons-material';import SystemStatusCard from'../components/SystemStatusCard';import AgentSummary from'../components/AgentSummary';import RecentTasks from'../components/RecentTasks';import MetricsOverview from'../components/MetricsOverview';import PendingApprovals from'../components/PendingApprovals';import{getSystemHealth,getAgentsStatus,getMetrics,getTaskHistory,getPendingPlans}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DashboardPage(){const[systemHealth,setSystemHealth]=useState(null);const[agentsStatus,setAgentsStatus]=useState(null);const[metrics,setMetrics]=useState(null);const[taskHistory,setTaskHistory]=useState([]);const[pendingPlans,setPendingPlans]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[refreshing,setRefreshing]=useState(false);const[snackbarOpen,setSnackbarOpen]=useState(false);const[snackbarMessage,setSnackbarMessage]=useState('');const fetchData=async()=>{try{setLoading(true);setError(null);const[healthRes,agentsRes,metricsRes,tasksRes,plansRes]=await Promise.all([getSystemHealth(),getAgentsStatus(),getMetrics(),getTaskHistory(),getPendingPlans()]);setSystemHealth(healthRes.data||healthRes);setAgentsStatus(agentsRes.agents||agentsRes.data||{});setMetrics(metricsRes.data||metricsRes);setTaskHistory(tasksRes.data||tasksRes.recent||[]);setPendingPlans(plansRes.data||plansRes);}catch(err){setError(err.message||'Failed to fetch dashboard data');setSnackbarMessage('Error loading dashboard data');setSnackbarOpen(true);}finally{setLoading(false);setRefreshing(false);}};useEffect(()=>{fetchData();const interval=setInterval(()=>{fetchData();},60000);// Refresh every minute\nreturn()=>clearInterval(interval);},[]);const handleRefresh=()=>{setRefreshing(true);fetchData();};const handleCloseSnackbar=()=>{setSnackbarOpen(false);};if(loading&&!systemHealth){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height:'100%'},children:/*#__PURE__*/_jsx(CircularProgress,{size:60})});}return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Catalyst Vector Alpha Dashboard\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:handleRefresh,disabled:refreshing,children:refreshing?'Refreshing...':'Refresh Data'})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:4,children:/*#__PURE__*/_jsx(SystemStatusCard,{health:systemHealth,agents:agentsStatus,metrics:metrics})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:4,children:/*#__PURE__*/_jsx(AgentSummary,{agents:agentsStatus})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,lg:4,children:/*#__PURE__*/_jsx(MetricsOverview,{metrics:metrics})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(RecentTasks,{tasks:taskHistory})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(PendingApprovals,{plans:pendingPlans,onRefresh:fetchData,setSnackbarMessage:setSnackbarMessage,setSnackbarOpen:setSnackbarOpen})})]}),/*#__PURE__*/_jsx(Snackbar,{open:snackbarOpen,autoHideDuration:6000,onClose:handleCloseSnackbar,message:snackbarMessage})]});}export default DashboardPage;","map":{"version":3,"names":["React","useState","useEffect","Grid","Paper","Typography","Box","Button","CircularProgress","Alert","Snackbar","Refresh","RefreshIcon","SystemStatusCard","AgentSummary","RecentTasks","MetricsOverview","PendingApprovals","getSystemHealth","getAgentsStatus","getMetrics","getTaskHistory","getPendingPlans","jsx","_jsx","jsxs","_jsxs","DashboardPage","systemHealth","setSystemHealth","agentsStatus","setAgentsStatus","metrics","setMetrics","taskHistory","setTaskHistory","pendingPlans","setPendingPlans","loading","setLoading","error","setError","refreshing","setRefreshing","snackbarOpen","setSnackbarOpen","snackbarMessage","setSnackbarMessage","fetchData","healthRes","agentsRes","metricsRes","tasksRes","plansRes","Promise","all","data","agents","recent","err","message","interval","setInterval","clearInterval","handleRefresh","handleCloseSnackbar","sx","display","justifyContent","alignItems","height","children","size","mb","variant","gutterBottom","startIcon","onClick","disabled","severity","container","spacing","item","xs","md","lg","health","tasks","plans","onRefresh","open","autoHideDuration","onClose"],"sources":["/home/prince/Desktop/FirstSemanticOS/Prototypes/Minimal_Executable_Core_Alpha/dashboard/src/pages/DashboardPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Grid, Paper, Typography, Box, Button, CircularProgress, Alert, Snackbar } from '@mui/material';\nimport { Refresh as RefreshIcon } from '@mui/icons-material';\nimport SystemStatusCard from '../components/SystemStatusCard';\nimport AgentSummary from '../components/AgentSummary';\nimport RecentTasks from '../components/RecentTasks';\nimport MetricsOverview from '../components/MetricsOverview';\nimport PendingApprovals from '../components/PendingApprovals';\nimport { getSystemHealth, getAgentsStatus, getMetrics, getTaskHistory, getPendingPlans } from '../api';\n\nfunction DashboardPage() {\n  const [systemHealth, setSystemHealth] = useState(null);\n  const [agentsStatus, setAgentsStatus] = useState(null);\n  const [metrics, setMetrics] = useState(null);\n  const [taskHistory, setTaskHistory] = useState([]);\n  const [pendingPlans, setPendingPlans] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [refreshing, setRefreshing] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState('');\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const [healthRes, agentsRes, metricsRes, tasksRes, plansRes] = await Promise.all([\n        getSystemHealth(),\n        getAgentsStatus(),\n        getMetrics(),\n        getTaskHistory(),\n        getPendingPlans()\n      ]);\n\n      setSystemHealth(healthRes.data || healthRes);\n      setAgentsStatus(agentsRes.agents || agentsRes.data || {});\n      setMetrics(metricsRes.data || metricsRes);\n      setTaskHistory(tasksRes.data || tasksRes.recent || []);\n      setPendingPlans(plansRes.data || plansRes);\n      \n    } catch (err) {\n      setError(err.message || 'Failed to fetch dashboard data');\n      setSnackbarMessage('Error loading dashboard data');\n      setSnackbarOpen(true);\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n    \n    const interval = setInterval(() => {\n      fetchData();\n    }, 60000); // Refresh every minute\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    fetchData();\n  };\n\n  const handleCloseSnackbar = () => {\n    setSnackbarOpen(false);\n  };\n\n  if (loading && !systemHealth) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\n        <CircularProgress size={60} />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          Catalyst Vector Alpha Dashboard\n        </Typography>\n        <Button\n          variant=\"outlined\"\n          startIcon={<RefreshIcon />}\n          onClick={handleRefresh}\n          disabled={refreshing}\n        >\n          {refreshing ? 'Refreshing...' : 'Refresh Data'}\n        </Button>\n      </Box>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          {error}\n        </Alert>\n      )}\n\n      <Grid container spacing={3}>\n        {/* System Status */}\n        <Grid item xs={12} md={6} lg={4}>\n          <SystemStatusCard \n            health={systemHealth} \n            agents={agentsStatus} \n            metrics={metrics}\n          />\n        </Grid>\n\n        {/* Agent Summary */}\n        <Grid item xs={12} md={6} lg={4}>\n          <AgentSummary agents={agentsStatus} />\n        </Grid>\n\n        {/* Metrics Overview */}\n        <Grid item xs={12} md={12} lg={4}>\n          <MetricsOverview metrics={metrics} />\n        </Grid>\n\n        {/* Recent Tasks */}\n        <Grid item xs={12} md={6}>\n          <RecentTasks tasks={taskHistory} />\n        </Grid>\n\n        {/* Pending Approvals */}\n        <Grid item xs={12} md={6}>\n          <PendingApprovals \n            plans={pendingPlans} \n            onRefresh={fetchData}\n            setSnackbarMessage={setSnackbarMessage}\n            setSnackbarOpen={setSnackbarOpen}\n          />\n        </Grid>\n      </Grid>\n\n      <Snackbar\n        open={snackbarOpen}\n        autoHideDuration={6000}\n        onClose={handleCloseSnackbar}\n        message={snackbarMessage}\n      />\n    </Box>\n  );\n}\n\nexport default DashboardPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}